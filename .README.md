I have the following Installed:
    Docker for Windows
    WSL 2
    Ubuntu for Windows

I am using this to keep track of how to enable on my localhost Docker contains: Elasticsearch, Kibana
    I want them to injest Elastic Agent's data
    I am also using sysmon

Start with Elasticsearch
    https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html

    docker pull docker.elastic.co/elasticsearch/elasticsearch:7.10.1

Install Kibana

    https://www.elastic.co/guide/en/kibana/current/docker.html

    docker pull docker.elastic.co/kibana/kibana:7.10.1

https://github.com/elastic/stack-docs/blob/master/docs/en/getting-started/get-started-docker.asciidoc

Files are work as of 1 Dec 2020

########################

docker-compose -f create-certs.yml run --rm create_certs
docker-compose -f elastic-docker-tls.yml up -d
docker exec es01 /bin/bash -c "bin/elasticsearch-setup-passwords auto --batch --url https://localhost:9200"
    enter passwords for kibana_system on kibana.config.yml file

docker-compose -f elastic-docker-tls.yml stop
docker-compose -f elastic-docker-tls.yml up -d


############# kill everything 
docker-compose -f elastic-docker-tls.yml down -v

Install the Elastic Agent with the following command:
C:\Program Files\Elastic-Agent> .\elastic-agent.exe install -f --kibana-url=https://localhost:5601 --enrollment-token=bHRPdUlIWUJSMzJvZjZwSktjbzQ6QUY0SmpvNFZSY1MxMUZCSk82S3ZRQQ== -i 

 C:\Users\Buzz\Documents\SysinternalsSuite> .\PsExec.exe -sid "C:\Program Files\Elastic-Agent\elastic-agent.exe" run      

 Get-Service 'Elastic Agent'                                                                                                                                                                                    Status   Name               DisplayName                                                                                 ------   ----               
   Running  Elastic Agent      Elastic Agent